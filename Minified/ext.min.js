var articleToSpeech={data:{Article:"",speechInProgress:!1,fallbackAudio:null},initialize:function(){articleToSpeech.hasArticle()&&(articleToSpeech.speechSynth()||articleToSpeech.speechApi())},hasArticle:function(){this.data.Article=window.document.getElementsByClassName("story-body-text");for(var e,t=this.data.Article,i=[],n=0;n<t.length;n++)i.push(t[n].textContent);return e=i.join(" "),this.data.Article=e.toString(),this.data.Article},speechSynth:function(){if(window.speechSynthesis){this.data.speechInProgress&&(polyfills.speechUtteranceChunker.cancel=!0),this.data.speechInProgress=!0;var e=new SpeechSynthesisUtterance(this.data.Article);return polyfills.speechUtteranceChunker(e,{chunkLength:140},function(){articleToSpeech.data.speechInProgress=!1}),!0}return!1},shortcutKeys:function(){var e=[];onkeydown=onkeyup=function(t){var i=t||event;e[i.keyCode]="keydown"==i.type,e[16]&&e[84]&&articleToSpeech.initialize()}}};chrome.extension.onMessage.addListener(function(e,t,i){"articleToSpeech"==e.action&&articleToSpeech.initialize()}),articleToSpeech.shortcutKeys();